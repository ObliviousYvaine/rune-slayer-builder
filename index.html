<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>Inventory - Rune Slayer</title>
    <link rel="stylesheet" href="css/organizer.css" />
    
</head>
<body>
    <h1>Organizer de Equipamentos</h1>
    <div class="LayoutEquipments">
        <div class="coluna1">
            <div class="slot" data-slot="helmet">Helmet</div>
            <div class="slot" data-slot="chest">Chest</div>
            <div class="slot" data-slot="back">Back</div>
            <div class="slot" data-slot="boots">Boots</div>
        </div>
        <img src="image/80DBEB90-D4F7-49AA-8724-9CC36BC7BAD7.png" alt="">
        <div class="coluna2">
            <div class="slot" data-slot="ring">Ring 1</div>
            <div class="slot" data-slot="ring">Ring 2</div>
            <div class="slot" data-slot="ring">Ring 3</div>
            <div class="slot" data-slot="ring">Ring 4</div>
        </div>
    </div>
    <div class="hotbar">
            <div class="slot" data-slot="race">Race</div>
            <div class="slot" data-slot="weapon1">Weapon1</div>
            <div class="slot" data-slot="offhand">Offhand</div>
            <div class="slot" data-slot="weapon2">Weapon2</div>
            <div class="slot" data-slot="lantern">Lantern</div>
        </div>
    </div>
    <script type="module">
        import itemsDatabase from '/data/items.js'; // Corrija o caminho se necessário
        import racesDatabase from '/data/races.js';

        window.itemsDatabase = itemsDatabase;

        // Agora seu script principal aqui dentro:
        const slots = document.querySelectorAll('.slot');

        function normalizarSlot(slotType) {
            const mapa = {
            weapon1: 'weapon',
            weapon2: 'weapon',
            };
            return mapa[slotType] || slotType;
        }

        slots.forEach(slot => {
            slot.addEventListener('click', () => {
            const slotType = slot.dataset.slot;
            const slotChave = normalizarSlot(slotType);

            const banco = window.itemsDatabase?.[slotChave];
            if (!banco || Object.keys(banco).length === 0) {
                alert("Nenhum item disponível para esse slot.");
                return;
            }

            const menu = document.createElement('div');
            menu.className = 'item-menu';

            for (const key in banco) {
                const item = banco[key];
                const nome = item.name || key;
                const botao = document.createElement('button');
                botao.textContent = `${nome}`;
                botao.onclick = () => {
                    slot.textContent = `${nome}`;
                    slot.classList.add('filled');
                    document.body.removeChild(menu);
                };
                menu.appendChild(botao);
            }

            const cancelar = document.createElement('button');
            cancelar.textContent = "Cancelar";
            cancelar.onclick = () => document.body.removeChild(menu);
            menu.appendChild(cancelar);

            document.body.appendChild(menu);
            });
        });
    </script>
</body>

</html>